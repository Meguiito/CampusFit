{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\vicen\\\\OneDrive\\\\Documentos\\\\Taller de Integraci\\xF3n II\\\\CampusFit\\\\client\\\\src\\\\Paginas\\\\ReservayEquipo.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { useNavigate } from 'react-router-dom';\nimport DatePicker, { registerLocale } from 'react-datepicker';\nimport 'react-datepicker/dist/react-datepicker.css';\nimport es from 'date-fns/locale/es';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nregisterLocale('es', es);\nfunction ReservayEquipo() {\n  _s();\n  const [time, setTime] = useState('');\n  const [error, setError] = useState(null);\n  const [cancha, setCancha] = useState('');\n  const [canchaTipo, setCanchaTipo] = useState('');\n  const [equipo, setEquipo] = useState('');\n  const [canchasDisponibles, setCanchasDisponibles] = useState([]);\n  const [equiposDisponibles, setEquiposDisponibles] = useState([]);\n  const navigate = useNavigate();\n\n  // Función para calcular el primer día hábil disponible\n  const calcularPrimerDiaHabil = () => {\n    const hoy = new Date();\n\n    // Si hoy es sábado, mover a lunes\n    if (hoy.getDay() === 6) {\n      hoy.setDate(hoy.getDate() + 2); // Mover a lunes\n    }\n    // Si hoy es domingo, mover a lunes\n    else if (hoy.getDay() === 0) {\n      hoy.setDate(hoy.getDate() + 1); // Mover a lunes\n    }\n    return hoy;\n  };\n  const [selectedDate, setSelectedDate] = useState(calcularPrimerDiaHabil());\n  useEffect(() => {\n    const fetchCanchasYEquipos = async () => {\n      const token = localStorage.getItem('token');\n      if (!token) {\n        setError('No se encontró el token de autenticación.');\n        return;\n      }\n      try {\n        const response = await fetch('http://localhost:5000/api/equipo_and_canchas', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': `Bearer ${token}`\n          },\n          body: JSON.stringify({\n            fecha: selectedDate.toISOString().split('T')[0],\n            hora: time\n          })\n        });\n        if (response.ok) {\n          const data = await response.json();\n          setCanchasDisponibles(data.canchas_disponibles);\n          setEquiposDisponibles(data.equipos_disponibles);\n        } else {\n          const errorData = await response.json();\n          setError(errorData.error || 'Error al obtener los datos.');\n        }\n      } catch (error) {\n        console.error('Error de red:', error);\n        setError('Error al conectar con el servidor.');\n      }\n    };\n    fetchCanchasYEquipos();\n  }, [selectedDate, time]);\n  const handleSubmit = async event => {\n    event.preventDefault();\n    setError(null);\n    const token = localStorage.getItem('token');\n    const formData = {\n      fecha: selectedDate.toISOString().split('T')[0],\n      // Format YYYY-MM-DD\n      hora: time,\n      cancha: cancha,\n      equipo: equipo\n    };\n    try {\n      const response = await fetch('http://localhost:5000/api/reservas', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify(formData)\n      });\n      if (response.status === 201) {\n        alert(\"Se ha reservado con éxito\");\n        navigate(\"/TuReservacion\");\n      } else if (response.status === 409) {\n        const result = await response.json();\n        setError(result.error); // Show conflict message\n      } else {\n        setError('Ocurrió un error al realizar la reserva.');\n      }\n    } catch (error) {\n      setError('Error al conectar con el servidor.');\n    }\n  };\n  const generarOpcionesTiempo = () => {\n    const opciones = [];\n    for (let hora = 8; hora <= 18; hora += 2) {\n      const horaFormateada = hora.toString().padStart(2, '0') + ':00';\n      opciones.push(horaFormateada);\n    }\n    return opciones;\n  };\n\n  // Función para determinar si una hora ya pasó (solo si la fecha seleccionada es hoy)\n  const esHoraPasada = horaSeleccionada => {\n    const hoy = new Date();\n    const fechaSeleccionada = selectedDate.toDateString() === hoy.toDateString();\n    if (!fechaSeleccionada) return false;\n    const [hora, minuto] = horaSeleccionada.split(':').map(Number);\n    const ahora = new Date();\n    return hora < ahora.getHours() || hora === ahora.getHours() && minuto < ahora.getMinutes();\n  };\n  const handleCanchaChange = e => {\n    const canchaNombre = e.target.value;\n    setCancha(canchaNombre);\n    const canchaSeleccionada = canchasDisponibles.find(c => c.nombre === canchaNombre);\n    if (canchaSeleccionada) {\n      setCanchaTipo(canchaSeleccionada.tipo);\n    } else {\n      setCanchaTipo('');\n    }\n  };\n  const equiposFiltrados = canchaTipo ? equiposDisponibles.filter(equipo => equipo.tipo === canchaTipo) : equiposDisponibles;\n  const calcularFechaMaxima = () => {\n    const hoy = new Date();\n\n    // Si hoy es sábado, mover a lunes\n    if (hoy.getDay() === 6) {\n      // 6 es sábado\n      hoy.setDate(hoy.getDate() + 2); // Mover a lunes\n    } else if (hoy.getDay() === 0) {\n      // 0 es domingo\n      hoy.setDate(hoy.getDate() + 1); // Mover a lunes\n    }\n    const finDeSemana = new Date(hoy);\n    finDeSemana.setDate(hoy.getDate() + (5 - hoy.getDay())); // Moverse al viernes de esta semana\n\n    return finDeSemana;\n  };\n  return /*#__PURE__*/_jsxDEV(Wrapper, {\n    children: /*#__PURE__*/_jsxDEV(FormularioContainer, {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Reserva tu Hora y Equipo\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(Fecha, {\n          children: [/*#__PURE__*/_jsxDEV(Label, {\n            children: \"Selecciona el D\\xEDa:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(DatePickerWrapper, {\n            children: /*#__PURE__*/_jsxDEV(DatePicker, {\n              selected: selectedDate,\n              onChange: date => setSelectedDate(date),\n              inline: true,\n              minDate: new Date() // Solo permitir seleccionar desde hoy\n              ,\n              maxDate: calcularFechaMaxima() // Permitir seleccionar hasta el viernes de la próxima semana\n              ,\n              filterDate: date => {\n                const day = date.getDay();\n                return day !== 0 && day !== 6; // Prohibir sábados (6) y domingos (0)\n              },\n              dateFormat: \"P\" // Formato de fecha adaptado al locale\n              ,\n              locale: \"es\" // Establece el locale a español\n              ,\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 171,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Hora, {\n          children: [/*#__PURE__*/_jsxDEV(Label, {\n            htmlFor: \"hora\",\n            children: \"Selecciona la Hora:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 188,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Select, {\n            id: \"hora\",\n            name: \"hora\",\n            value: time,\n            onChange: e => setTime(e.target.value),\n            required: true,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"Selecciona una hora\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 196,\n              columnNumber: 15\n            }, this), generarOpcionesTiempo().map(hora => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: hora,\n              disabled: esHoraPasada(hora),\n              children: hora\n            }, hora, false, {\n              fileName: _jsxFileName,\n              lineNumber: 198,\n              columnNumber: 17\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Cancha, {\n          children: [/*#__PURE__*/_jsxDEV(Label, {\n            htmlFor: \"cancha\",\n            children: \"Selecciona la Cancha:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Select, {\n            id: \"cancha\",\n            name: \"cancha\",\n            value: cancha,\n            onChange: handleCanchaChange,\n            required: true,\n            disabled: !time // Deshabilitar si no hay una hora seleccionada\n            ,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"Selecciona una cancha\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 214,\n              columnNumber: 15\n            }, this), canchasDisponibles.map(c => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: c.nombre,\n              children: c.nombre\n            }, c._id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 216,\n              columnNumber: 17\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Equipo, {\n          children: [/*#__PURE__*/_jsxDEV(Label, {\n            htmlFor: \"equipo\",\n            children: \"Selecciona tu Equipo:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 221,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Select, {\n            id: \"equipo\",\n            name: \"equipo\",\n            value: equipo,\n            onChange: e => setEquipo(e.target.value),\n            required: true,\n            disabled: !time || !canchaTipo // Deshabilitar si no hay una hora seleccionada\n            ,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"Selecciona un equipo\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 230,\n              columnNumber: 15\n            }, this), equiposFiltrados.map(e => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: e.nombre,\n              children: e.nombre\n            }, e._id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 232,\n              columnNumber: 17\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          type: \"submit\",\n          children: \"Reservar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(ErrorNotification, {\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 19\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 164,\n    columnNumber: 5\n  }, this);\n}\n_s(ReservayEquipo, \"qM3V+Xio+wsiMenNwEYYINndbjA=\", false, function () {\n  return [useNavigate];\n});\n_c = ReservayEquipo;\nexport default ReservayEquipo;\n\n/*---------------------------------------------------------Estilo----------------------------------------------------- */\n\nconst Wrapper = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-height: 100vh; /* Ocupa al menos el alto de la ventana */\n  background-color: #f0f2f5; /* Color de fondo suave */\n`;\n_c2 = Wrapper;\nconst DatePickerWrapper = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  .react-datepicker {\n    font-size: 1.2rem; /* Tamaño de fuente base */\n    width: 100%;\n  }\n\n  .react-datepicker__header {\n    padding: 10px 0;\n    background-color: #2985ec;\n    border-bottom: none;\n  }\n\n  .react-datepicker__current-month,\n  .react-datepicker-time__header,\n  .react-datepicker-year-header {\n    font-size: 1.4rem;\n    color: #FFD700;\n  }\n\n  .react-datepicker__day-name,\n  .react-datepicker__day,\n  .react-datepicker__time-name {\n    width: calc(90% / 7); /* Ocupa el 100% del ancho dividido por 7 (días de la semana) */\n    height: 3rem; /* Aumenta la altura para que sea más fácil de hacer clic */\n    line-height: 3rem; /* Centrar verticalmente */\n    font-size: 1.4rem;\n    text-align: center;\n  }\n\n  .react-datepicker__day-name {\n    font-weight: bold;\n    color: #FFD700;\n  }\n\n  .react-datepicker__day {\n    justify-content: center;\n    align-items: center;\n  }\n\n  .react-datepicker__day--selected,\n  .react-datepicker__day--keyboard-selected {\n    background-color: #FFD700;\n    color: #2985ec;\n  }\n\n  .react-datepicker__navigation-icon::before {\n    border-color: #FFD700;\n  }\n\n  /* Oculta el triángulo */\n  .react-datepicker__triangle {\n    display: none;\n  }\n\n  .react-datepicker__month-container {\n    width: 100%;\n  }\n\n  /* Ajusta el tamaño de los botones de navegación */\n  .react-datepicker__navigation {\n    top: 10px;\n  }\n\n  /* Media Queries para Responsividad */\n\n  /* Tablets (≥ 768px y < 1024px) */\n  @media (min-width: 768px) and (max-width: 1023px) {\n    .react-datepicker {\n      font-size: 1rem;\n    }\n\n    .react-datepicker__current-month,\n    .react-datepicker-time__header,\n    .react-datepicker-year-header {\n      font-size: 1.2rem;\n    }\n\n    .react-datepicker__day-name,\n    .react-datepicker__day,\n    .react-datepicker__time-name {\n      width: calc(90% / 7); /* Asegura que los días ocupen el mismo espacio en tablets */\n      height: 3rem; /* Ajusta la altura para tablets */\n      line-height: 3rem; /* Centrar verticalmente en tablets */\n      font-size: 1rem;\n    }\n  }\n\n  /* Móviles (≥ 480px y < 768px) */\n  @media (max-width: 767px) {\n    .react-datepicker {\n      font-size: 0.9rem;\n    }\n\n    .react-datepicker__current-month,\n    .react-datepicker-time__header,\n    .react-datepicker-year-header {\n      font-size: 1rem;\n    }\n\n    .react-datepicker__day-name,\n    .react-datepicker__day,\n    .react-datepicker__time-name {\n      width: calc(90% / 7); /* Asegura que los días ocupen el mismo espacio en móviles */\n      height: 2.5rem; /* Ajusta la altura para móviles */\n      line-height: 2.5rem; /* Centrar verticalmente en móviles */\n      font-size: 0.9rem;\n    }\n\n    .react-datepicker__header {\n      padding: 8px 0;\n    }\n\n    .react-datepicker__navigation {\n      top: 8px;\n    }\n  }\n\n  /* Dispositivos muy pequeños (< 480px) */\n  @media (max-width: 479px) {\n    .react-datepicker {\n      font-size: 0.8rem; /* Tamaño de fuente más pequeño */\n    }\n\n    .react-datepicker__current-month,\n    .react-datepicker-time__header,\n    .react-datepicker-year-header {\n      font-size: 1rem; /* Tamaño de fuente más pequeño para el encabezado */\n    }\n\n    .react-datepicker__day-name,\n    .react-datepicker__day,\n    .react-datepicker__time-name {\n      width: calc(90% / 7); /* Asegura que los días ocupen el mismo espacio en dispositivos muy pequeños */\n      height: 2rem; /* Ajusta la altura para que sea más manejable */\n      line-height: 2rem; /* Centrar verticalmente en dispositivos muy pequeños */\n      font-size: 0.8rem; /* Tamaño de fuente más pequeño */\n    }\n\n    .react-datepicker__header {\n      padding: 6px 0; /* Menos padding en el encabezado */\n    }\n\n    .react-datepicker__navigation {\n      top: 6px; /* Posición ajustada para los botones de navegación */\n    }\n  }\n`;\n_c3 = DatePickerWrapper;\nconst FormularioContainer = styled.div`\n  background: linear-gradient(135deg, #3498DB, #ffffff);\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 40px;\n  margin: 20px;\n  border-radius: 20px;\n  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);\n  max-width: 600px; /* Reducido para hacer el contenedor más delgado */\n  width: 90%;\n\n  h2 {\n    color: white;\n    text-align: center;\n    margin-bottom: 20px;\n  }\n\n  form {\n    display: flex;\n    flex-direction: column;\n    gap: 15px;\n    max-width: 100%;\n    width: 100%;\n    background-color: #2985ec;\n    border-radius: 15px;\n    padding: 20px;\n    color: #FFD700;\n  }\n`;\n_c4 = FormularioContainer;\nconst Fecha = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n\n  label {\n    margin-bottom: 5px;\n    font-weight: bold;\n    color: white;\n    font-size: 1.2rem;\n  }\n`;\n_c5 = Fecha;\nconst Hora = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 5px;\n\n  label {\n    margin-bottom: 5px;\n    font-weight: bold;\n    color: white;\n  }\n`;\n_c6 = Hora;\nconst Cancha = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 5px;\n\n  label {\n    margin-bottom: 5px;\n    font-weight: bold;\n    color: white;\n  }\n`;\n_c7 = Cancha;\nconst Equipo = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 5px;\n\n  label {\n    margin-bottom: 5px;\n    font-weight: bold;\n    color: white;\n  }\n`;\n_c8 = Equipo;\nconst Label = styled.label`\n  font-weight: bold;\n`;\n_c9 = Label;\nconst Select = styled.select`\n  padding: 10px;\n  border: 1px solid #ddd;\n  border-radius: 5px;\n  font-size: 14px;\n  box-sizing: border-box;\n  width: 100%;\n`;\n_c10 = Select;\nconst Button = styled.button`\n  background-color: #FFD700;\n  border: none;\n  border-radius: 5px;\n  color: black;\n  padding: 10px;\n  font-size: 1rem;\n  cursor: pointer;\n  transition: background-color 0.3s ease;\n  width: 100%;\n\n  &:hover {\n    background-color: #1e6bb8;\n    color: white;\n  }\n`;\n_c11 = Button;\nconst ErrorNotification = styled.div`\n  margin-top: 20px;\n  background-color: #ff6347;\n  color: white;\n  padding: 10px;\n  border-radius: 5px;\n  text-align: center;\n  width: 100%;\n  max-width: 600px; \n`;\n_c12 = ErrorNotification;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c10, _c11, _c12;\n$RefreshReg$(_c, \"ReservayEquipo\");\n$RefreshReg$(_c2, \"Wrapper\");\n$RefreshReg$(_c3, \"DatePickerWrapper\");\n$RefreshReg$(_c4, \"FormularioContainer\");\n$RefreshReg$(_c5, \"Fecha\");\n$RefreshReg$(_c6, \"Hora\");\n$RefreshReg$(_c7, \"Cancha\");\n$RefreshReg$(_c8, \"Equipo\");\n$RefreshReg$(_c9, \"Label\");\n$RefreshReg$(_c10, \"Select\");\n$RefreshReg$(_c11, \"Button\");\n$RefreshReg$(_c12, \"ErrorNotification\");","map":{"version":3,"names":["React","useState","useEffect","styled","useNavigate","DatePicker","registerLocale","es","jsxDEV","_jsxDEV","ReservayEquipo","_s","time","setTime","error","setError","cancha","setCancha","canchaTipo","setCanchaTipo","equipo","setEquipo","canchasDisponibles","setCanchasDisponibles","equiposDisponibles","setEquiposDisponibles","navigate","calcularPrimerDiaHabil","hoy","Date","getDay","setDate","getDate","selectedDate","setSelectedDate","fetchCanchasYEquipos","token","localStorage","getItem","response","fetch","method","headers","body","JSON","stringify","fecha","toISOString","split","hora","ok","data","json","canchas_disponibles","equipos_disponibles","errorData","console","handleSubmit","event","preventDefault","formData","status","alert","result","generarOpcionesTiempo","opciones","horaFormateada","toString","padStart","push","esHoraPasada","horaSeleccionada","fechaSeleccionada","toDateString","minuto","map","Number","ahora","getHours","getMinutes","handleCanchaChange","e","canchaNombre","target","value","canchaSeleccionada","find","c","nombre","tipo","equiposFiltrados","filter","calcularFechaMaxima","finDeSemana","Wrapper","children","FormularioContainer","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","Fecha","Label","DatePickerWrapper","selected","onChange","date","inline","minDate","maxDate","filterDate","day","dateFormat","locale","required","Hora","htmlFor","Select","id","name","disabled","Cancha","_id","Equipo","Button","type","ErrorNotification","_c","div","_c2","_c3","_c4","_c5","_c6","_c7","_c8","label","_c9","select","_c10","button","_c11","_c12","$RefreshReg$"],"sources":["C:/Users/vicen/OneDrive/Documentos/Taller de Integración II/CampusFit/client/src/Paginas/ReservayEquipo.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport styled from 'styled-components';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport DatePicker, { registerLocale } from 'react-datepicker';\r\nimport 'react-datepicker/dist/react-datepicker.css';\r\nimport es from 'date-fns/locale/es'; \r\nregisterLocale('es', es); \r\n\r\nfunction ReservayEquipo() {\r\n  const [time, setTime] = useState('');\r\n  const [error, setError] = useState(null);\r\n  const [cancha, setCancha] = useState('');\r\n  const [canchaTipo, setCanchaTipo] = useState('');\r\n  const [equipo, setEquipo] = useState('');\r\n  const [canchasDisponibles, setCanchasDisponibles] = useState([]);\r\n  const [equiposDisponibles, setEquiposDisponibles] = useState([]);\r\n  const navigate = useNavigate();\r\n  \r\n\r\n  // Función para calcular el primer día hábil disponible\r\n  const calcularPrimerDiaHabil = () => {\r\n    const hoy = new Date();\r\n    \r\n    // Si hoy es sábado, mover a lunes\r\n    if (hoy.getDay() === 6) {\r\n        hoy.setDate(hoy.getDate() + 2); // Mover a lunes\r\n    } \r\n    // Si hoy es domingo, mover a lunes\r\n    else if (hoy.getDay() === 0) {\r\n        hoy.setDate(hoy.getDate() + 1); // Mover a lunes\r\n    }\r\n\r\n    return hoy;\r\n  };\r\n\r\n  const [selectedDate, setSelectedDate] = useState(calcularPrimerDiaHabil());\r\n  useEffect(() => {\r\n    const fetchCanchasYEquipos = async () => {\r\n      const token = localStorage.getItem('token');\r\n      if (!token) {\r\n        setError('No se encontró el token de autenticación.');\r\n        return;\r\n      }\r\n\r\n      try {\r\n        const response = await fetch('http://localhost:5000/api/equipo_and_canchas', {\r\n          method: 'POST',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n            'Authorization': `Bearer ${token}`,\r\n          },\r\n          body: JSON.stringify({ fecha: selectedDate.toISOString().split('T')[0], hora: time }),\r\n        });\r\n\r\n        if (response.ok) {\r\n          const data = await response.json();\r\n          setCanchasDisponibles(data.canchas_disponibles);\r\n          setEquiposDisponibles(data.equipos_disponibles);\r\n        } else {\r\n          const errorData = await response.json();\r\n          setError(errorData.error || 'Error al obtener los datos.');\r\n        }\r\n      } catch (error) {\r\n        console.error('Error de red:', error);\r\n        setError('Error al conectar con el servidor.');\r\n      }\r\n    };\r\n\r\n    fetchCanchasYEquipos();\r\n  }, [selectedDate, time]);\r\n\r\n  const handleSubmit = async (event) => {\r\n    event.preventDefault();\r\n    setError(null);\r\n\r\n    const token = localStorage.getItem('token');\r\n    const formData = {\r\n      fecha: selectedDate.toISOString().split('T')[0], // Format YYYY-MM-DD\r\n      hora: time,\r\n      cancha: cancha,\r\n      equipo: equipo,\r\n    };\r\n\r\n    try {\r\n      const response = await fetch('http://localhost:5000/api/reservas', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${token}`,\r\n        },\r\n        body: JSON.stringify(formData),\r\n      });\r\n\r\n      if (response.status === 201) {\r\n        alert(\"Se ha reservado con éxito\");\r\n        navigate(\"/TuReservacion\");\r\n      } else if (response.status === 409) {\r\n        const result = await response.json();\r\n        setError(result.error); // Show conflict message\r\n      } else {\r\n        setError('Ocurrió un error al realizar la reserva.');\r\n      }\r\n    } catch (error) {\r\n      setError('Error al conectar con el servidor.');\r\n    }\r\n  };\r\n\r\n  const generarOpcionesTiempo = () => {\r\n    const opciones = [];\r\n    for (let hora = 8; hora <= 18; hora += 2) {\r\n      const horaFormateada = hora.toString().padStart(2, '0') + ':00';\r\n      opciones.push(horaFormateada);\r\n    }\r\n    return opciones;\r\n  };\r\n\r\n  // Función para determinar si una hora ya pasó (solo si la fecha seleccionada es hoy)\r\n  const esHoraPasada = (horaSeleccionada) => {\r\n    const hoy = new Date();\r\n    const fechaSeleccionada = selectedDate.toDateString() === hoy.toDateString();\r\n\r\n    if (!fechaSeleccionada) return false;\r\n\r\n    const [hora, minuto] = horaSeleccionada.split(':').map(Number);\r\n    const ahora = new Date();\r\n    return hora < ahora.getHours() || (hora === ahora.getHours() && minuto < ahora.getMinutes());\r\n  };\r\n\r\n  const handleCanchaChange = (e) => {\r\n    const canchaNombre = e.target.value;\r\n    setCancha(canchaNombre);\r\n\r\n    const canchaSeleccionada = canchasDisponibles.find(c => c.nombre === canchaNombre);\r\n    if (canchaSeleccionada) {\r\n      setCanchaTipo(canchaSeleccionada.tipo);\r\n    } else {\r\n      setCanchaTipo('');\r\n    }\r\n  };\r\n\r\n  const equiposFiltrados = canchaTipo\r\n    ? equiposDisponibles.filter(equipo => equipo.tipo === canchaTipo)\r\n    : equiposDisponibles;\r\n\r\n\r\n    const calcularFechaMaxima = () => {\r\n      const hoy = new Date();\r\n    \r\n      // Si hoy es sábado, mover a lunes\r\n      if (hoy.getDay() === 6) { // 6 es sábado\r\n        hoy.setDate(hoy.getDate() + 2); // Mover a lunes\r\n      } else if (hoy.getDay() === 0) { // 0 es domingo\r\n        hoy.setDate(hoy.getDate() + 1); // Mover a lunes\r\n      }\r\n    \r\n      const finDeSemana = new Date(hoy);\r\n      finDeSemana.setDate(hoy.getDate() + (5 - hoy.getDay())); // Moverse al viernes de esta semana\r\n    \r\n      return finDeSemana;\r\n    };\r\n     \r\n\r\n  return (\r\n    <Wrapper>\r\n      <FormularioContainer>\r\n        <h2>Reserva tu Hora y Equipo</h2>\r\n        <form onSubmit={handleSubmit}>\r\n          <Fecha>\r\n            <Label>Selecciona el Día:</Label>\r\n              <DatePickerWrapper>\r\n                <DatePicker\r\n                  selected={selectedDate}\r\n                  onChange={(date) => setSelectedDate(date)}\r\n                  inline\r\n                  minDate={new Date()} // Solo permitir seleccionar desde hoy\r\n                  maxDate={calcularFechaMaxima()} // Permitir seleccionar hasta el viernes de la próxima semana\r\n                  filterDate={(date) => {\r\n                    const day = date.getDay();\r\n                    return day !== 0 && day !== 6; // Prohibir sábados (6) y domingos (0)\r\n                  }}\r\n                  dateFormat=\"P\" // Formato de fecha adaptado al locale\r\n                  locale=\"es\" // Establece el locale a español\r\n                  required\r\n                />\r\n              </DatePickerWrapper>\r\n          </Fecha>\r\n          <Hora>\r\n            <Label htmlFor=\"hora\">Selecciona la Hora:</Label>\r\n            <Select\r\n              id=\"hora\"\r\n              name=\"hora\"\r\n              value={time}\r\n              onChange={(e) => setTime(e.target.value)}\r\n              required\r\n            >\r\n              <option value=\"\">Selecciona una hora</option>\r\n              {generarOpcionesTiempo().map((hora) => (\r\n                <option key={hora} value={hora} disabled={esHoraPasada(hora)}>\r\n                  {hora}\r\n                </option>\r\n              ))}\r\n            </Select>\r\n          </Hora>\r\n          <Cancha>\r\n            <Label htmlFor=\"cancha\">Selecciona la Cancha:</Label>\r\n            <Select\r\n              id=\"cancha\"\r\n              name=\"cancha\"\r\n              value={cancha}\r\n              onChange={handleCanchaChange}\r\n              required\r\n              disabled={!time} // Deshabilitar si no hay una hora seleccionada\r\n            >\r\n              <option value=\"\">Selecciona una cancha</option>\r\n              {canchasDisponibles.map((c) => (\r\n                <option key={c._id} value={c.nombre}>{c.nombre}</option>\r\n              ))}\r\n            </Select>\r\n          </Cancha>\r\n          <Equipo>\r\n            <Label htmlFor=\"equipo\">Selecciona tu Equipo:</Label>\r\n            <Select\r\n              id=\"equipo\"\r\n              name=\"equipo\"\r\n              value={equipo}\r\n              onChange={(e) => setEquipo(e.target.value)}\r\n              required\r\n              disabled={!time || !canchaTipo} // Deshabilitar si no hay una hora seleccionada\r\n            >\r\n              <option value=\"\">Selecciona un equipo</option>\r\n              {equiposFiltrados.map((e) => (\r\n                <option key={e._id} value={e.nombre}>{e.nombre}</option>\r\n              ))}\r\n            </Select>\r\n          </Equipo>\r\n          <Button type=\"submit\">Reservar</Button>\r\n        </form>\r\n        {error && <ErrorNotification>{error}</ErrorNotification>}\r\n      </FormularioContainer>\r\n    </Wrapper>\r\n  );\r\n}\r\n\r\nexport default ReservayEquipo;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/*---------------------------------------------------------Estilo----------------------------------------------------- */\r\n\r\nconst Wrapper = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  min-height: 100vh; /* Ocupa al menos el alto de la ventana */\r\n  background-color: #f0f2f5; /* Color de fondo suave */\r\n`;\r\n\r\nconst DatePickerWrapper = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n\r\n  .react-datepicker {\r\n    font-size: 1.2rem; /* Tamaño de fuente base */\r\n    width: 100%;\r\n  }\r\n\r\n  .react-datepicker__header {\r\n    padding: 10px 0;\r\n    background-color: #2985ec;\r\n    border-bottom: none;\r\n  }\r\n\r\n  .react-datepicker__current-month,\r\n  .react-datepicker-time__header,\r\n  .react-datepicker-year-header {\r\n    font-size: 1.4rem;\r\n    color: #FFD700;\r\n  }\r\n\r\n  .react-datepicker__day-name,\r\n  .react-datepicker__day,\r\n  .react-datepicker__time-name {\r\n    width: calc(90% / 7); /* Ocupa el 100% del ancho dividido por 7 (días de la semana) */\r\n    height: 3rem; /* Aumenta la altura para que sea más fácil de hacer clic */\r\n    line-height: 3rem; /* Centrar verticalmente */\r\n    font-size: 1.4rem;\r\n    text-align: center;\r\n  }\r\n\r\n  .react-datepicker__day-name {\r\n    font-weight: bold;\r\n    color: #FFD700;\r\n  }\r\n\r\n  .react-datepicker__day {\r\n    justify-content: center;\r\n    align-items: center;\r\n  }\r\n\r\n  .react-datepicker__day--selected,\r\n  .react-datepicker__day--keyboard-selected {\r\n    background-color: #FFD700;\r\n    color: #2985ec;\r\n  }\r\n\r\n  .react-datepicker__navigation-icon::before {\r\n    border-color: #FFD700;\r\n  }\r\n\r\n  /* Oculta el triángulo */\r\n  .react-datepicker__triangle {\r\n    display: none;\r\n  }\r\n\r\n  .react-datepicker__month-container {\r\n    width: 100%;\r\n  }\r\n\r\n  /* Ajusta el tamaño de los botones de navegación */\r\n  .react-datepicker__navigation {\r\n    top: 10px;\r\n  }\r\n\r\n  /* Media Queries para Responsividad */\r\n\r\n  /* Tablets (≥ 768px y < 1024px) */\r\n  @media (min-width: 768px) and (max-width: 1023px) {\r\n    .react-datepicker {\r\n      font-size: 1rem;\r\n    }\r\n\r\n    .react-datepicker__current-month,\r\n    .react-datepicker-time__header,\r\n    .react-datepicker-year-header {\r\n      font-size: 1.2rem;\r\n    }\r\n\r\n    .react-datepicker__day-name,\r\n    .react-datepicker__day,\r\n    .react-datepicker__time-name {\r\n      width: calc(90% / 7); /* Asegura que los días ocupen el mismo espacio en tablets */\r\n      height: 3rem; /* Ajusta la altura para tablets */\r\n      line-height: 3rem; /* Centrar verticalmente en tablets */\r\n      font-size: 1rem;\r\n    }\r\n  }\r\n\r\n  /* Móviles (≥ 480px y < 768px) */\r\n  @media (max-width: 767px) {\r\n    .react-datepicker {\r\n      font-size: 0.9rem;\r\n    }\r\n\r\n    .react-datepicker__current-month,\r\n    .react-datepicker-time__header,\r\n    .react-datepicker-year-header {\r\n      font-size: 1rem;\r\n    }\r\n\r\n    .react-datepicker__day-name,\r\n    .react-datepicker__day,\r\n    .react-datepicker__time-name {\r\n      width: calc(90% / 7); /* Asegura que los días ocupen el mismo espacio en móviles */\r\n      height: 2.5rem; /* Ajusta la altura para móviles */\r\n      line-height: 2.5rem; /* Centrar verticalmente en móviles */\r\n      font-size: 0.9rem;\r\n    }\r\n\r\n    .react-datepicker__header {\r\n      padding: 8px 0;\r\n    }\r\n\r\n    .react-datepicker__navigation {\r\n      top: 8px;\r\n    }\r\n  }\r\n\r\n  /* Dispositivos muy pequeños (< 480px) */\r\n  @media (max-width: 479px) {\r\n    .react-datepicker {\r\n      font-size: 0.8rem; /* Tamaño de fuente más pequeño */\r\n    }\r\n\r\n    .react-datepicker__current-month,\r\n    .react-datepicker-time__header,\r\n    .react-datepicker-year-header {\r\n      font-size: 1rem; /* Tamaño de fuente más pequeño para el encabezado */\r\n    }\r\n\r\n    .react-datepicker__day-name,\r\n    .react-datepicker__day,\r\n    .react-datepicker__time-name {\r\n      width: calc(90% / 7); /* Asegura que los días ocupen el mismo espacio en dispositivos muy pequeños */\r\n      height: 2rem; /* Ajusta la altura para que sea más manejable */\r\n      line-height: 2rem; /* Centrar verticalmente en dispositivos muy pequeños */\r\n      font-size: 0.8rem; /* Tamaño de fuente más pequeño */\r\n    }\r\n\r\n    .react-datepicker__header {\r\n      padding: 6px 0; /* Menos padding en el encabezado */\r\n    }\r\n\r\n    .react-datepicker__navigation {\r\n      top: 6px; /* Posición ajustada para los botones de navegación */\r\n    }\r\n  }\r\n`;\r\n\r\nconst FormularioContainer = styled.div`\r\n  background: linear-gradient(135deg, #3498DB, #ffffff);\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  padding: 40px;\r\n  margin: 20px;\r\n  border-radius: 20px;\r\n  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);\r\n  max-width: 600px; /* Reducido para hacer el contenedor más delgado */\r\n  width: 90%;\r\n\r\n  h2 {\r\n    color: white;\r\n    text-align: center;\r\n    margin-bottom: 20px;\r\n  }\r\n\r\n  form {\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 15px;\r\n    max-width: 100%;\r\n    width: 100%;\r\n    background-color: #2985ec;\r\n    border-radius: 15px;\r\n    padding: 20px;\r\n    color: #FFD700;\r\n  }\r\n`;\r\n\r\nconst Fecha = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 10px;\r\n\r\n  label {\r\n    margin-bottom: 5px;\r\n    font-weight: bold;\r\n    color: white;\r\n    font-size: 1.2rem;\r\n  }\r\n`;\r\n\r\nconst Hora = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 5px;\r\n\r\n  label {\r\n    margin-bottom: 5px;\r\n    font-weight: bold;\r\n    color: white;\r\n  }\r\n`;\r\n\r\nconst Cancha = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 5px;\r\n\r\n  label {\r\n    margin-bottom: 5px;\r\n    font-weight: bold;\r\n    color: white;\r\n  }\r\n`;\r\n\r\nconst Equipo = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 5px;\r\n\r\n  label {\r\n    margin-bottom: 5px;\r\n    font-weight: bold;\r\n    color: white;\r\n  }\r\n`;\r\n\r\nconst Label = styled.label`\r\n  font-weight: bold;\r\n`;\r\n\r\nconst Select = styled.select`\r\n  padding: 10px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 5px;\r\n  font-size: 14px;\r\n  box-sizing: border-box;\r\n  width: 100%;\r\n`;\r\n\r\nconst Button = styled.button`\r\n  background-color: #FFD700;\r\n  border: none;\r\n  border-radius: 5px;\r\n  color: black;\r\n  padding: 10px;\r\n  font-size: 1rem;\r\n  cursor: pointer;\r\n  transition: background-color 0.3s ease;\r\n  width: 100%;\r\n\r\n  &:hover {\r\n    background-color: #1e6bb8;\r\n    color: white;\r\n  }\r\n`;\r\n\r\nconst ErrorNotification = styled.div`\r\n  margin-top: 20px;\r\n  background-color: #ff6347;\r\n  color: white;\r\n  padding: 10px;\r\n  border-radius: 5px;\r\n  text-align: center;\r\n  width: 100%;\r\n  max-width: 600px; \r\n`;\r\n"],"mappings":"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A;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACE,GAAA,GAtJI3B,iBAAiB;AAwJvB,MAAMR,mBAAmB,GAAG7F,MAAM,CAAC8H,GAAG;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACG,GAAA,GA7BIpC,mBAAmB;AA+BzB,MAAMM,KAAK,GAAGnG,MAAM,CAAC8H,GAAG;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACI,GAAA,GAXI/B,KAAK;AAaX,MAAMc,IAAI,GAAGjH,MAAM,CAAC8H,GAAG;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACK,GAAA,GAVIlB,IAAI;AAYV,MAAMM,MAAM,GAAGvH,MAAM,CAAC8H,GAAG;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACM,GAAA,GAVIb,MAAM;AAYZ,MAAME,MAAM,GAAGzH,MAAM,CAAC8H,GAAG;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACO,GAAA,GAVIZ,MAAM;AAYZ,MAAMrB,KAAK,GAAGpG,MAAM,CAACsI,KAAK;AAC1B;AACA,CAAC;AAACC,GAAA,GAFInC,KAAK;AAIX,MAAMe,MAAM,GAAGnH,MAAM,CAACwI,MAAM;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACC,IAAA,GAPItB,MAAM;AASZ,MAAMO,MAAM,GAAG1H,MAAM,CAAC0I,MAAM;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACC,IAAA,GAfIjB,MAAM;AAiBZ,MAAME,iBAAiB,GAAG5H,MAAM,CAAC8H,GAAG;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACc,IAAA,GATIhB,iBAAiB;AAAA,IAAAC,EAAA,EAAAE,GAAA,EAAAC,GAAA,EAAAC,GAAA,EAAAC,GAAA,EAAAC,GAAA,EAAAC,GAAA,EAAAC,GAAA,EAAAE,GAAA,EAAAE,IAAA,EAAAE,IAAA,EAAAC,IAAA;AAAAC,YAAA,CAAAhB,EAAA;AAAAgB,YAAA,CAAAd,GAAA;AAAAc,YAAA,CAAAb,GAAA;AAAAa,YAAA,CAAAZ,GAAA;AAAAY,YAAA,CAAAX,GAAA;AAAAW,YAAA,CAAAV,GAAA;AAAAU,YAAA,CAAAT,GAAA;AAAAS,YAAA,CAAAR,GAAA;AAAAQ,YAAA,CAAAN,GAAA;AAAAM,YAAA,CAAAJ,IAAA;AAAAI,YAAA,CAAAF,IAAA;AAAAE,YAAA,CAAAD,IAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}